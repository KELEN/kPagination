!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).KPagination=e()}(this,function(){"use strict";function t(t){var o=this;this.el=null,this.currentPage=1,this.totalPage=0,this.offset=5,this.showPrev=!0,this.showNext=!0,this.onPageChange=void 0,this.linkTemplate=void 0,this.linkTarget="_self",this.ssr=!1,this.getLinkByTemplate=function(t,e,n){void 0===n&&(n="");var i=o.linkTemplate,a=o.linkTarget;return i?'<a class="'+n+'" href="'+i.replace(/{{(page)}}/,String(t))+'" target="'+a+'">'+e+"</a>":""},this.getLink=function(t,e,n){return'<a href="javascript:void(0)" data-page="'+t+'" class="'+(n=void 0===n?"":n)+'">'+e+"</a>"},this.generateHtml=function(t){var s=o.currentPage,e=o.linkTemplate,r=[];return e?t.forEach(function(t){var e,n,i,a="";"."===t?r.push('<span class="k-pagination-dot">...</span>'):"string"==typeof t?(a="k-pagination-num",e=(n=t.split("-"))[0],+(n=n[1])==+s&&(a="k-pagination-disabled"),"p"===e?(i=o.getLinkByTemplate(n,"«",a),r.push(i)):"n"===e&&(i=o.getLinkByTemplate(n,"»",a),r.push(i))):(a="k-pagination-num",+s==+t&&(a+=" k-pagination-num-active"),r.push(o.getLinkByTemplate(t,t,a)))}):t.forEach(function(t){var e,n,i="";"."===t?r.push('<a class="k-pagination-dot">...</a>'):"string"==typeof t?(i="k-pagination-num",e=(n=t.split("-"))[0],+(n=n[1])==+s&&(i="k-pagination-disabled"),"p"===e?r.push(o.getLink(n,"«",i)):"n"===e&&r.push(o.getLink(n,"»",i))):(i="k-pagination-num",+s==+t&&(i+=" k-pagination-num-active"),r.push(o.getLink(t,t,i)))}),r.join("")},this.getPagesHtml=function(){var t=o.build();return o.generateHtml(t)};var e=t.el,n=t.offset,i=t.linkTemplate,a=t.linkTarget,s=t.ssr,r=t.currentPage,t=t.totalPage;s?r&&t&&(this.currentPage=r,this.totalPage=t,this.offset=n):(this.el="string"==typeof e?document.querySelector(e):e,this.el?(this.totalPage=Number(this.el.getAttribute("data-total")),this.currentPage=Number(this.el.getAttribute("data-page")),this.linkTemplate=i,this.linkTarget=a,this.offset=n,this.refresh(),i||this.bindEvent()):console.error("el is not found in document"))}return t.prototype.bindEvent=function(){var n=this,i=this.el,a=this.onPageChange;i&&function(e,n,i){try{e.addEventListener(n,i,!1)}catch(t){try{e.attachEvent("on"+n,i)}catch(t){e["on"+n]=i}}}(i,"click",function(t){t.preventDefault();var e=n.currentPage,t=t.target;!t||(t=t.getAttribute("data-page"))&&(+e==+t||(a&&"function"==typeof a&&a.call(n,t),n.currentPage=Number(t),null!=i&&i.setAttribute("data-page",t),n.refresh()))})},t.prototype.refresh=function(){var t=this.build();this.el&&(this.el.innerHTML=this.generateHtml(t))},t.prototype.setCurrentPage=function(t){this.currentPage=t,this.refresh()},t.prototype.setTotalPage=function(t){this.totalPage=t,this.refresh()},t.prototype.build=function(){var t=[],e=1,n=this.totalPage,i=this,a=i.showPrev,s=i.showNext,r=i.totalPage,o=i.offset,h=i.currentPage;if(r<h)return console.error("current page number must less than total page number"),[];i=Number(Math.floor(o/2));if(a&&t.push("p-"+Math.max(1,Math.min(h-1,r))),r<=o)for(;e<=r;)t.push(e),e++;else if(h<o){for(e=1;e<=o;)t.push(e),e++;h<r&&(t.push("."),t.push(r))}else if(r-o+1<h)for(t.push(1,"."),e=r-o+1;e<=r;e++)t.push(e);else if(o<=h)if(h<=o+i){for(t.push(1),t.push("."),n=Math.min(h+i,r),e=h-i;e<=n;e++)t.push(e);h<r-i&&(t.push("."),t.push(r))}else if(t.push(1),t.push("."),r-o+1<h)for(e=(n=r)-o+1;e<=n;e++)t.push(e);else{for(n=Math.min(h+i,r),e=Math.min(h-i,r-o+1);e<=n;e++)t.push(e);h<r-i&&(t.push("."),t.push(r))}return s&&t.push("n-"+Math.max(1,Math.min(h+1,r))),t},t});
