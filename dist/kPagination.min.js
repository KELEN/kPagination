!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof exports?module.exports=e:t.kPagination=e(t)}(this,function(t){"use strict";function i(e,a,s){try{e.addEventListener(a,s,!1)}catch(t){try{e.attachEvent("on"+a,s)}catch(t){e["on"+a]=s}}}var e=function(t){this.el=document.getElementById(t.id),this.pageWrap=document.createElement("div"),this.pageWrap.className="k-pagination-num-wrap",this.el.appendChild(this.pageWrap),this.currentPage=t.currentPage||1,this.totalPage=t.totalPage||1,this.offset=t.offset||5,this.showPrev=!!t.showPrev,this.showNext=!!t.showNext,this.offsetHalf=Math.floor((this.offset-1)/2),this.jumpPage=!!t.jumpPage,this.jumpText=t.jumpText||"确定",this.pageChangeFn="function"==typeof t.pageChange?t.pageChange:void 0,this.afterRefreshFn="function"==typeof t.afterRefresh?t.afterRefresh:void 0,this.refresh(),this.bindEvent(),this.jumpPage&&this.generateInput()};return e.prototype.generateInput=function(){var t=document.createElement("div");t.className="k-pagination-input-wrap";var e=document.createElement("input");e.className="k-pagination-num-input",e.type="text";var a=document.createElement("button");a.className="k-pagination-jump-btn",a.innerText=this.jumpText,t.appendChild(e),t.appendChild(a),i(e,"keyup",function(){this.value=this.value.replace(/\D/g,"")}),this.el.appendChild(t)},e.prototype.bindEvent=function(){var a,s=this;i(this.el,"click",function(t){var e=t.target||t.srcElement;if(e.getAttribute("data-num")){if((a=parseInt(e.getAttribute("data-num"),10))==s.currentPage)return;s.pageChangeFn&&s.pageChangeFn.call(s,a),s.currentPage=a,s.refresh()}if(-1<e.className.indexOf("k-pagination-jump-btn")){if(!(a=parseInt(e.previousSibling.value,10)))return;a<1&&(a=1),a>s.totalPage&&(a=s.totalPage),s.pageChangeFn&&s.pageChangeFn.call(s,a),s.currentPage=a,s.refresh()}})},e.prototype.refresh=function(){var t=this.build();this.pageWrap.innerHTML=this.generateHtml(t),this.afterRefreshFn&&this.afterRefreshFn.call(this)},e.prototype.setTotalPage=function(t){this.totalPage=parseInt(t),this.refresh()},e.prototype.setCurrentPage=function(t){this.currentPage=parseInt(t),this.refresh()},e.prototype.build=function(){var t=[],e=1,a=1,s=this.totalPage;if(this.showPrev&&t.push("p-"+Math.max(1,Math.min(this.currentPage-1,this.totalPage))),this.totalPage<=this.offset)for(;e<=this.totalPage;)t.push(e),e++;else if(this.currentPage<this.offset){for(e=1;e<=this.offset;)t.push(e),e++;this.currentPage<this.totalPage&&(t.push("."),t.push(this.totalPage))}else if(this.currentPage>this.totalPage-this.offset+1)for(t.push(1,"."),e=this.totalPage-this.offset+1;e<=this.totalPage;e++)t.push(e);else if(this.currentPage>=this.offset)if(this.currentPage<=this.offset+this.offsetHalf){for(t.push(1),t.push("."),s=Math.min(this.currentPage+this.offsetHalf,this.totalPage),e=this.currentPage-this.offsetHalf;e<=s;e++)t.push(e);this.currentPage<this.totalPage-this.offsetHalf&&(t.push("."),t.push(this.totalPage))}else if(t.push(1),t.push("."),this.currentPage>this.totalPage-this.offset+1)for(a=this.totalPage-this.offset+1,s=this.totalPage,e=a;e<=s;e++)t.push(e);else{for(s=Math.min(this.currentPage+this.offsetHalf,this.totalPage),e=a=Math.min(this.currentPage-this.offsetHalf,this.totalPage-this.offset+1);e<=s;e++)t.push(e);this.currentPage<this.totalPage-this.offsetHalf&&(t.push("."),t.push(this.totalPage))}return this.showNext&&t.push("n-"+Math.max(1,Math.min(this.currentPage+1,this.totalPage))),t},e.prototype.generateHtml=function(t){for(var e,a=[],s=0;s<t.length;s++)if("."===t[s])a.push('<a class="k-pagination-dot">...</a>');else if("string"==typeof t[s]){e="k-pagination-num";var i=t[s].split("-"),n=i[1];n==this.currentPage&&(e="k-pagination-disabled"),"p"===i[0]?a.push('<a href="#" data-num="'+n+'" class="'+e+'">&#60;</a>'):"n"===i[0]&&a.push('<a href="#" data-num="'+n+'" class="'+e+'">&#62;</a>')}else e="k-pagination-num",this.currentPage==t[s]&&(e+=" k-pagination-num-active"),a.push('<a href="#" data-num="'+t[s]+'" class="'+e+'">'+t[s]+"</a>");return a.join("")},e});