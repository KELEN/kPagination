(function(d,e){"function"===typeof define&&define.amd?define(function(){return e(d)}):"object"===typeof exports?module.exports=e:d.kPagination=e(d)})(this,function(d){function e(a,b,c){try{a.addEventListener(b,c,!1)}catch(g){try{a.attachEvent("on"+b,c)}catch(h){a["on"+b]=c}}}d=function(a){this.el=document.getElementById(a.id);this.currentPage=a.currentPage||1;this.totalPage=a.totalPage||1;this.offset=a.offset||5;this.showPrev=!!a.showPrev;this.showNext=!!a.showNext;this.offsetHalf=Math.floor((this.offset-
1)/2);this.jumpPage=!!a.jumpPage;this.jumpText=a.jumpText||"\u786e\u5b9a";this.pageArray=[];this.refresh();this.bindEvent()};d.prototype.bindEvent=function(){var a=this,b;e(this.el,"click",function(c){c=c.target||c.srcElement;if(c.getAttribute("data-num")){b=parseInt(c.getAttribute("data-num"),10);if(b==a.currentPage)return;a.currentPage=b;a.refresh()}-1<c.className.indexOf("k-pagination-jump-btn")&&(b=parseInt(c.previousSibling.value,10))&&(1>b&&(b=1),b>a.totalPage&&(b=a.totalPage),a.currentPage=
b,a.refresh())})};d.prototype.refresh=function(){var a=this.build();this.el.innerHTML=this.generateHtml(a)};d.prototype.build=function(){var a=[],b=1,c;this.showPrev&&a.push("p-"+Math.max(1,Math.min(this.currentPage-1,this.totalPage)));if(this.totalPage<=this.offset)for(;b<=this.totalPage;)a.push(b),b++;else if(this.currentPage<this.offset){for(b=1;b<=this.offset;)a.push(b),b++;this.currentPage<this.totalPage&&(a.push("."),a.push(this.totalPage))}else if(this.currentPage>=this.offset)if(this.currentPage<=
this.offset+this.offsetHalf){a.push(1);a.push(".");c=Math.min(this.currentPage+this.offsetHalf,this.totalPage);for(b=this.currentPage-this.offsetHalf;b<=c;b++)a.push(b);this.currentPage<this.totalPage-this.offsetHalf&&(a.push("."),a.push(this.totalPage))}else if(a.push(1),a.push("."),this.currentPage>this.totalPage-this.offset+1)for(b=this.totalPage-this.offset+1,c=this.totalPage;b<=c;b++)a.push(b);else{c=Math.min(this.currentPage+this.offsetHalf,this.totalPage);for(b=Math.min(this.currentPage-this.offsetHalf,
this.totalPage-this.offset+1);b<=c;b++)a.push(b);this.currentPage<this.totalPage-this.offsetHalf&&(a.push("."),a.push(this.totalPage))}this.showNext&&a.push("n-"+Math.max(1,Math.min(this.currentPage+1,this.totalPage)));return this.pageArray=a};d.prototype.generateHtml=function(a){for(var b=[],c,d=0;d<a.length;d++)if("."===a[d])b.push("<a>...</a>");else if("string"===typeof a[d]){c="k-pagination-num";var e=a[d].split("-"),f=e[1];f==this.currentPage&&(c="k-pagination-disabled");"p"===e[0]?b.push('<a href="#" data-num="'+
f+'" class="'+c+'">&#60;</a>'):"n"===e[0]&&b.push('<a href="#" data-num="'+f+'" class="'+c+'">&#62;</a>')}else c="k-pagination-num",this.currentPage==a[d]&&(c+=" k-pagination-num-active"),b.push('<a href="#" data-num="'+a[d]+'" class="'+c+'">'+a[d]+"</a>");this.jumpPage&&b.push('<input class="k-pagination-num-input" type="text" /><button class="k-pagination-jump-btn">'+this.jumpText+"</button>");return b.join("")};return d});